<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title>Create Order</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body class="p-4">
    <div class="container">
        <h1>Create Order</h1>
        <form th:action="@{/orders/create}" method="post">
            <div class="mb-3">
                <label class="form-label">Customer (choose an existing)</label>
                <select name="customerId" class="form-select">
                    <option value="">-- Select --</option>
                    <option th:each="c : ${customers}" th:value="${c.id}" th:text="${c.name}">Customer</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Or enter new customer</label>
                <input type="text" name="newCustomerName" class="form-control mb-1" placeholder="Customer name" />
                <input type="email" name="newCustomerEmail" class="form-control" placeholder="Email (optional)" />
            </div>

            <div class="mb-3">
                <label class="form-label">Date</label>
                <input type="date" name="date" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Products</label>
                <div th:each="p : ${products}" class="form-check mb-1">
                    <input class="form-check-input" type="checkbox" th:id="${'p_'+p.id}" name="productIds"
                        th:value="${p.id}" th:checked="${selectedProductIds.contains(p.id)}">
                    <label class="form-check-label" th:for="${'p_'+p.id}"
                        th:text="${p.name + ' â€” ' + p.price}">Product</label>
                    &nbsp; Qty:
                    <input type="number" min="1" th:name="${'quantity_' + p.id}"
                        th:value="${selectedQuantities[p.id] != null ? selectedQuantities[p.id] : 1}"
                        class="form-control d-inline-block" style="width:80px;">
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Create</button>
            <a th:href="@{/orders}" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
</body>

</html>