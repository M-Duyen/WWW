<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
    <head>
        <meta charset="UTF-8" />
        <title>Order Detail</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
    </head>

    <body class="p-4">
        <div class="container">
            <h1>Order #[<span th:text="${order.id}">1</span>]</h1>
            <p>
                <strong>Customer:</strong>
                <span
                    th:text="${order.customer != null ? order.customer.name : '--'}"
                    >Name</span
                >
            </p>
            <p>
                <strong>Date:</strong>
                <span th:text="${order.date}">2025-10-11</span>
            </p>

            <h4>Products</h4>
            <ul class="list-group mb-3">
                <li
                    class="list-group-item"
                    th:each="ol : ${order.orderLineSet}"
                >
                    <span th:text="${ol.product.name}">Product</span> â€”
                    <span th:text="${ol.product.price}">0.0</span> x
                    <span th:text="${ol.quantity}">1</span>
                </li>
                <li
                    class="list-group-item"
                    th:if="${#lists.isEmpty(order.orderLineSet)}"
                >
                    No products
                </li>
            </ul>

            <p>
                <strong>Total:</strong>
                <span th:text="${order.total}">0.0</span>
            </p>

            <a th:href="@{/orders}" class="btn btn-secondary">Back</a>
            <a
                th:href="@{|/orders/edit/${order.id}|}"
                class="btn btn-warning"
                sec:authorize="hasRole('ADMIN')"
                >Edit</a
            >
            <form
                th:action="@{|/orders/delete/${order.id}|}"
                method="post"
                style="display: inline"
                sec:authorize="hasRole('ADMIN')"
            >
                <button
                    type="submit"
                    class="btn btn-danger"
                    onclick="return confirm('Delete?')"
                >
                    Delete
                </button>
            </form>
        </div>
    </body>
</html>
